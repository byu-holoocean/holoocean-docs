<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/><meta content="Docutils 0.18.1: http://docutils.sourceforge.net/" name="generator"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ROS2 Wrapper — HoloOcean 1.0.0 documentation</title>
<link href="../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../_static/css/theme.css" rel="stylesheet" type="text/css"/>
<link href="../_static/copybutton.css" rel="stylesheet" type="text/css"/>
<link href="../_static/themes_override.css" rel="stylesheet" type="text/css"/>
<link href="../_static/favicon.png" rel="shortcut icon"/>
<!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
<script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
<script src="../_static/jquery.js"></script>
<script src="../_static/underscore.js"></script>
<script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
<script src="../_static/doctools.js"></script>
<script src="../_static/clipboard.min.js"></script>
<script src="../_static/copybutton.js"></script>
<script src="../_static/js/theme.js"></script>
<link href="../genindex.html" rel="index" title="Index"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="shmem.html" rel="next" title="Shared Memory"/>
<link href="dynamics.html" rel="prev" title="Dynamics"/>
</head>
<body class="wy-body-for-nav">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href="../index.html">
            HoloOcean
          </a>
<div class="version"><a href="../../versionList.html" style="color: inherit;">UE5.3_Prerelease</a></div>
<div role="search">
<form action="../search.html" class="wy-form" id="rtd-search-form" method="get">
<input aria-label="Search docs" name="q" placeholder="Search docs" type="text"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</div>
</div><div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<p class="caption" role="heading"><span class="caption-text">HoloOcean Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/getting-started.html">Getting Started &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/usage.html">Using HoloOcean</a></li>
<li class="toctree-l1"><a class="reference internal" href="../packages/packages.html">HoloOcean Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agents/agents.html">HoloOcean Agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/develop.html">Developing HoloOcean</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versionList.html">Other Versions Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">HoloOcean</a></li>
<li class="toctree-l1"><a class="reference internal" href="agents.html">Agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="spaces.html">Spaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="holooceanclient.html">HoloOcean Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="packagemanager.html">Package Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensors.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="lcm.html">LCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamics.html">Dynamics</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ROS2 Wrapper</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#publishing-your-own-sensor">Publishing your own sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#record-your-data">Record your data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="shmem.html">Shared Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">Util</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="weather.html">Weather Controller</a></li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift"><nav aria-label="Mobile navigation menu" class="wy-nav-top">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="../index.html">HoloOcean</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content">
<div aria-label="Page navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a aria-label="Home" class="icon icon-home" href="../index.html"></a></li>
<li class="breadcrumb-item active">ROS2 Wrapper</li>
<li class="wy-breadcrumbs-aside">
<a href="../_sources/holoocean/ros2.rst.txt" rel="nofollow"> View page source</a>
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div itemprop="articleBody">
<section id="ros2-wrapper">
<h1>ROS2 Wrapper<a class="headerlink" href="#ros2-wrapper" title="Permalink to this heading"></a></h1>
<p>After installing holoocean, you can clone this ros package into your ros workspace:
<a class="reference external" href="https://github.com/byu-holoocean/holoocean-ros">https://github.com/byu-holoocean/holoocean-ros</a></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul class="simple">
<li><p>CURRENTLY ROS2 SETUP ONLY WORKS WITH SINGLE AGENT SCENARIOS</p></li>
<li><p>Running holoocean and ros2 in a virtual environment (ie. conda) may cause dependency issues</p></li>
<li><p>The speed of the simulation will max out which may cause timing errors.</p></li>
</ul>
</div>
<p>ROS workspace for holoocean works with ros2 humble installation
Follow the ROS2 installation tutorials: <a class="reference external" href="https://docs.ros.org/en/humble/Tutorials">https://docs.ros.org/en/humble/Tutorials</a></p>
<p>The example controller can be run after building the package in your ros workspace:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ros</span><span class="o">/</span><span class="n">humble</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">bash</span>
<span class="n">colcon</span> <span class="n">build</span>
<span class="n">source</span> <span class="n">install</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">bash</span>

<span class="n">ros2</span> <span class="n">launch</span> <span class="n">holoocean_main</span> <span class="n">torpedo_launch</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Follow the ROS2 Documentation to build nodes to control the holoocean environment</p>
<dl>
<dt>The holoocean_main node:</dt><dd><ul class="simple">
<li><p>Subscribes to Controller commands</p></li>
<li><p>Publishes the sensor data retuned in holoocean state</p></li>
<li><p>Creates a timer to tick the environment</p></li>
</ul>
<p>The holoocean publishers will use the namespace holoocean (View Documentation on namespaces)
the name of the topic will follow the scenario name for the sensor
If there is no name given it will be the same as sensor type.</p>
</dd>
<dt>Holoocean Interface package:</dt><dd><ul class="simple">
<li><p>Holds the messages and service used for publishing sensor data</p></li>
</ul>
</dd>
<dt>command_example node:</dt><dd><ul class="simple">
<li><p>Publishes random HSD commands at specific intervals</p></li>
<li><p>Or publishes a preprogrammed sequence of HSD commands</p></li>
</ul>
</dd>
</dl>
<section id="publishing-your-own-sensor">
<h2>Publishing your own sensor<a class="headerlink" href="#publishing-your-own-sensor" title="Permalink to this heading"></a></h2>
<p>After  implementing in your sensor Python and Cpp with the holoocean package:</p>
<blockquote>
<div><ul>
<li><p>Make msg file in holoocean_interfaces (ex. SensorData.msg)</p></li>
<li><p>Add msg file to Cmake list (ex. “msg/SesnorData.msg”)</p></li>
<li><p>In sensor data converter file:</p>
<blockquote>
<div><ul class="simple">
<li><p>Add an elif statement in convert_to_msg function</p></li>
<li><p>Add a Key to sensor_keys</p></li>
<li><p>Import the message object in first line of the file (ex. from holoocean_interfaces.msg import SensorData)</p></li>
<li><p>Add function to encode the data into a ros message</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>Run the following code to rebuild your ros2 workspace</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ros</span><span class="o">/</span><span class="n">humble</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">bash</span>
<span class="n">colcon</span> <span class="n">build</span>
<span class="n">source</span> <span class="n">install</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">bash</span>
</pre></div>
</div>
</section>
<section id="record-your-data">
<h2>Record your data<a class="headerlink" href="#record-your-data" title="Permalink to this heading"></a></h2>
<p>To record sensor data or commands with ros2bag installed you can run a command like this
from your ros2_ws folder</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">install</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">bash</span>
<span class="n">ros2</span> <span class="n">bag</span> <span class="n">record</span> <span class="o">/</span><span class="n">holoocean</span><span class="o">/</span><span class="n">desiredHSD</span> <span class="o">/</span><span class="n">holoocean</span><span class="o">/</span><span class="n">RotationSensor</span> <span class="o">/</span><span class="n">holoocean</span><span class="o">/</span><span class="n">LocationSensor</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">save_data</span>
</pre></div>
</div>
<p>You can read more on the ros2 Documentation here to record and play back ros2 bag data:
<a class="reference external" href="https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Recording-And-Playing-Back-Data/Recording-And-Playing-Back-Data.html">https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Recording-And-Playing-Back-Data/Recording-And-Playing-Back-Data.html</a></p>
</section>
</section>
</div>
</div>
<footer><div aria-label="Footer" class="rst-footer-buttons" role="navigation">
<a accesskey="p" class="btn btn-neutral float-left" href="dynamics.html" rel="prev" title="Dynamics"><span aria-hidden="true" class="fa fa-arrow-circle-left"></span> Previous</a>
<a accesskey="n" class="btn btn-neutral float-right" href="shmem.html" rel="next" title="Shared Memory">Next <span aria-hidden="true" class="fa fa-arrow-circle-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<p>© Copyright BYU FRoStLab.</p>
</div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
</div>
</div>
</section>
</div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
</body>
</html>