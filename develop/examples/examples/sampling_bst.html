<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/><meta content="Docutils 0.18.1: http://docutils.sourceforge.net/" name="generator"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Sampling Biomass, Salinity, Temperature — HoloOcean 2.2.2 documentation</title>
<link href="../../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/css/theme.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/copybutton.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/themes_override.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/favicon.png" rel="shortcut icon"/>
<!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
<script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
<script src="../../_static/jquery.js"></script>
<script src="../../_static/underscore.js"></script>
<script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
<script src="../../_static/doctools.js"></script>
<script src="../../_static/clipboard.min.js"></script>
<script src="../../_static/copybutton.js"></script>
<script src="../../_static/js/theme.js"></script>
<link href="../../genindex.html" rel="index" title="Index"/>
<link href="../../search.html" rel="search" title="Search"/>
<link href="sonar_imaging.html" rel="next" title="Visualizing Imaging Sonar"/>
<link href="pd-controllers.html" rel="prev" title="Example: PD Controller"/>
</head>
<body class="wy-body-for-nav">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href="../../index.html">
            HoloOcean
          </a>
<div class="version"><a href="../../../versionList.html" style="color: inherit;">Develop</a></div>
<div role="search">
<form action="../../search.html" class="wy-form" id="rtd-search-form" method="get">
<input aria-label="Search docs" name="q" placeholder="Search docs" type="text"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</div>
</div><div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<p class="caption" role="heading"><span class="caption-text">HoloOcean Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../usage/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/usage.html">Using HoloOcean</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/packages.html">HoloOcean Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../agents/agents.html">HoloOcean Agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sensors/sensors.html">HoloOcean Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../env_appearance/env_appearance.html">Environment Appearance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../versionList.html">Other Versions Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="camera.html">Visualizing RGBCamera Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller.html">Manually Controlling an Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom-dynamics.html">Manually Defining Dynamics</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi-agent.html">Multi Agent Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi-coms.html">Multi-Agent Communications</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocean-currents.html">Ocean Currents</a></li>
<li class="toctree-l2"><a class="reference internal" href="pd-controllers.html">Example: PD Controller</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Sampling Biomass, Salinity, Temperature</a></li>
<li class="toctree-l2"><a class="reference internal" href="sonar_imaging.html">Visualizing Imaging Sonar</a></li>
<li class="toctree-l2"><a class="reference internal" href="sonar_profiling.html">Visualizing Profiling Sonar</a></li>
<li class="toctree-l2"><a class="reference internal" href="sonar_sidescan.html">Visualizing Sidescan Sonar</a></li>
<li class="toctree-l2"><a class="reference internal" href="sonar_singlebeam.html">Visualizing Singlebeam Sonar</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../develop/develop.html">Developing HoloOcean</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/changelog.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../holoocean/index.html">HoloOcean</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../holoocean/agents.html">Agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../holoocean/environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../holoocean/spaces.html">Action Spaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../holoocean/commands.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../holoocean/holooceanclient.html">HoloOcean Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../holoocean/packagemanager.html">Package Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../holoocean/sensors.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../holoocean/lcm.html">LCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../holoocean/dynamics.html">Fossen Dynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../holoocean/shmem.html">Shared Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../holoocean/util.html">Util</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../holoocean/exceptions.html">Exceptions</a></li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift"><nav aria-label="Mobile navigation menu" class="wy-nav-top">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="../../index.html">HoloOcean</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content">
<div aria-label="Page navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a aria-label="Home" class="icon icon-home" href="../../index.html"></a></li>
<li class="breadcrumb-item"><a href="../examples.html">Examples</a></li>
<li class="breadcrumb-item active">Sampling Biomass, Salinity, Temperature</li>
<li class="wy-breadcrumbs-aside">
<a href="../../_sources/examples/examples/sampling_bst.rst.txt" rel="nofollow"> View page source</a>
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div itemprop="articleBody">
<section id="sampling-biomass-salinity-temperature">
<span id="sampling-bst"></span><h1>Sampling Biomass, Salinity, Temperature<a class="headerlink" href="#sampling-biomass-salinity-temperature" title="Permalink to this heading"></a></h1>
<p>It can be useful to model more complex distributions of biomass, salinity, and temperature by utilizing clusters.
Clusters allow us to place concentrations of biomass, salinity, or temperature at any point in the map that may not always
follow the conventional trends. The following scenario uses the base function models for biomass and
salinity, adds some biomass clusters that might represent phytoplankton blooms, and uses a custom
temperature function that may model how temperature across simulation location is affected near
glaciers. To upload a custom function instead of just tweaking the current parameters, use
<code class="docutils literal notranslate"><span class="pre">env.set_biomass_function("auv0",</span> <span class="pre">new_biomass_function)</span></code>, <code class="docutils literal notranslate"><span class="pre">env.set_salinity_function("auv0",</span> <span class="pre">new_salinity_function)</span></code>,
or <code class="docutils literal notranslate"><span class="pre">env.set_temperature_function("auv0",</span> <span class="pre">new_temperature_function)</span></code> for biomass, salinity, or temperature
respectively. “auv0” is the vehicle you want to modify the function for, and “new_temp_function”
is your custom function that takes in at least a 1D, 3-element array and outputs the temperature.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">holoocean</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pynput</span><span class="w"> </span><span class="kn">import</span> <span class="n">keyboard</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">multiprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Process</span><span class="p">,</span> <span class="n">Queue</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">holoocean.environments</span><span class="w"> </span><span class="kn">import</span> <span class="n">HoloOceanEnvironment</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">queue</span><span class="w"> </span><span class="kn">import</span> <span class="n">Empty</span>

<span class="k">def</span><span class="w"> </span><span class="nf">temp_fx</span><span class="p">(</span><span class="n">location</span><span class="p">):</span>
    <span class="c1"># NOTE: It's required that we name this parameter "location"</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">location</span>
    <span class="n">base_temp</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="o">-</span><span class="mf">.2</span>
    <span class="n">beta</span> <span class="o">=</span> <span class="mf">.05</span>
    <span class="k">return</span> <span class="n">base_temp</span> <span class="o">+</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">z</span> <span class="o">+</span> <span class="n">beta</span> <span class="o">*</span> <span class="n">y</span>

<span class="n">scenario</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"test_currents"</span><span class="p">,</span>
    <span class="s2">"world"</span><span class="p">:</span> <span class="s2">"PierHarbor"</span><span class="p">,</span>
    <span class="s2">"package_name"</span><span class="p">:</span> <span class="s2">"Ocean"</span><span class="p">,</span>
    <span class="s2">"main_agent"</span><span class="p">:</span> <span class="s2">"auv0"</span><span class="p">,</span>
    <span class="s2">"ticks_per_sec"</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s2">"frames_per_sec"</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s2">"agents"</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">"agent_name"</span><span class="p">:</span> <span class="s2">"auv0"</span><span class="p">,</span>
                <span class="s2">"agent_type"</span><span class="p">:</span> <span class="s2">"HoveringAUV"</span><span class="p">,</span>
                <span class="s2">"sensors"</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">"sensor_type"</span><span class="p">:</span> <span class="s2">"BSTSensor"</span><span class="p">,</span>
                        <span class="s2">"socket"</span><span class="p">:</span> <span class="s2">"COM"</span><span class="p">,</span>
                        <span class="s2">"configuration"</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">"biomass_clusters"</span><span class="p">:</span> <span class="p">[{</span><span class="s2">"position"</span><span class="p">:[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">],</span> <span class="s2">"strength"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">"falloff"</span><span class="p">:</span> <span class="mi">10</span><span class="p">}]</span>
                        <span class="p">}</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">"sensor_type"</span><span class="p">:</span> <span class="s2">"LocationSensor"</span><span class="p">,</span>
                        <span class="s2">"socket"</span><span class="p">:</span> <span class="s2">"COM"</span>
                    <span class="p">}</span>
                <span class="p">],</span>
            <span class="s2">"control_scheme"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"location"</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">],</span>
    <span class="p">}</span>

<span class="n">pressed_keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">force</span> <span class="o">=</span> <span class="mi">200</span>

<span class="k">def</span><span class="w"> </span><span class="nf">on_press</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">pressed_keys</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s1">'char'</span><span class="p">):</span>
        <span class="n">pressed_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">char</span><span class="p">)</span>
        <span class="n">pressed_keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">pressed_keys</span><span class="p">))</span>

<span class="k">def</span><span class="w"> </span><span class="nf">on_release</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">pressed_keys</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s1">'char'</span><span class="p">):</span>
        <span class="n">pressed_keys</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">char</span><span class="p">)</span>

<span class="n">listener</span> <span class="o">=</span> <span class="n">keyboard</span><span class="o">.</span><span class="n">Listener</span><span class="p">(</span>
    <span class="n">on_press</span><span class="o">=</span><span class="n">on_press</span><span class="p">,</span>
    <span class="n">on_release</span><span class="o">=</span><span class="n">on_release</span><span class="p">)</span>
<span class="n">listener</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">parse_keys</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">visualizer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">'i'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">+=</span> <span class="n">val</span>
    <span class="k">if</span> <span class="s1">'k'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">-=</span> <span class="n">val</span>
    <span class="k">if</span> <span class="s1">'j'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="n">command</span><span class="p">[[</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="p">]]</span> <span class="o">+=</span> <span class="mf">.1</span> <span class="o">*</span> <span class="n">val</span>
        <span class="n">command</span><span class="p">[[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]]</span> <span class="o">-=</span> <span class="mf">.1</span> <span class="o">*</span> <span class="n">val</span>
    <span class="k">if</span> <span class="s1">'l'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="n">command</span><span class="p">[[</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="p">]]</span> <span class="o">-=</span> <span class="mf">.1</span> <span class="o">*</span> <span class="n">val</span>
        <span class="n">command</span><span class="p">[[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]]</span> <span class="o">+=</span> <span class="mf">.1</span> <span class="o">*</span> <span class="n">val</span>

    <span class="k">if</span> <span class="s1">'w'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="n">command</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span> <span class="o">+=</span> <span class="n">val</span>
    <span class="k">if</span> <span class="s1">'s'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="n">command</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span> <span class="o">-=</span> <span class="n">val</span>
    <span class="k">if</span> <span class="s1">'a'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="n">command</span><span class="p">[[</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">]]</span> <span class="o">+=</span> <span class="n">val</span>
        <span class="n">command</span><span class="p">[[</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">]]</span> <span class="o">-=</span> <span class="n">val</span>
    <span class="k">if</span> <span class="s1">'d'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="n">command</span><span class="p">[[</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">]]</span> <span class="o">-=</span> <span class="n">val</span>
        <span class="n">command</span><span class="p">[[</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">]]</span> <span class="o">+=</span> <span class="n">val</span>

    <span class="k">if</span> <span class="s1">'m'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">visualizer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">visualizer</span><span class="o">.</span><span class="n">update_position</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>


    <span class="k">return</span> <span class="n">command</span>

<span class="k">def</span><span class="w"> </span><span class="nf">plot_process</span><span class="p">(</span><span class="n">location_queue</span><span class="p">,</span> <span class="n">scenario</span><span class="p">,</span> <span class="n">custom_temp</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Process started"</span><span class="p">)</span>
    <span class="n">visualizer</span> <span class="o">=</span> <span class="n">HoloOceanEnvironment</span><span class="o">.</span><span class="n">initialize_bst_graphs</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">scenario</span><span class="p">,</span> <span class="n">temperature_func</span><span class="o">=</span><span class="n">custom_temp</span><span class="p">)</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">latest_location</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">latest_location</span> <span class="o">=</span> <span class="n">location_queue</span><span class="o">.</span><span class="n">get_nowait</span><span class="p">()</span>
            <span class="k">except</span> <span class="n">Empty</span><span class="p">:</span>
                <span class="k">break</span>

        <span class="k">if</span> <span class="n">latest_location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">visualizer</span><span class="o">.</span><span class="n">update_position</span><span class="p">(</span><span class="n">latest_location</span><span class="p">)</span>

        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">.01</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">with</span> <span class="n">holoocean</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">scenario_cfg</span><span class="o">=</span><span class="n">scenario</span><span class="p">,</span> <span class="n">start_world</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">as</span> <span class="n">env</span><span class="p">:</span>
        <span class="c1"># Here we pass in the custom function into the live graph instance to get accurate figures</span>
        <span class="n">queue</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>
        <span class="n">queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">scenario</span><span class="p">[</span><span class="s2">"agents"</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">"location"</span><span class="p">])</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">plot_process</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="n">scenario</span><span class="p">,</span> <span class="n">temp_fx</span><span class="p">))</span>
        <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">env</span><span class="o">.</span><span class="n">set_temperature_function</span><span class="p">(</span><span class="s2">"auv0"</span><span class="p">,</span> <span class="n">temp_fx</span><span class="p">)</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="c1"># We need to pass the same custom function into the BST sensor to get accurate readings in the terminal</span>
            <span class="n">sensor_data</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">tick</span><span class="p">()</span>
            <span class="n">location</span> <span class="o">=</span> <span class="n">sensor_data</span><span class="p">[</span><span class="s2">"LocationSensor"</span><span class="p">]</span>
            <span class="n">queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
            <span class="n">bst_data</span> <span class="o">=</span> <span class="n">sensor_data</span><span class="p">[</span><span class="s2">"BSTSensor"</span><span class="p">]</span>
            <span class="c1"># print(bst_data)</span>
            <span class="n">time</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="k">if</span> <span class="s1">'-'</span> <span class="ow">in</span> <span class="n">pressed_keys</span><span class="p">:</span>
                <span class="k">break</span>

            <span class="c1"># Your control logic</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">parse_keys</span><span class="p">(</span><span class="n">pressed_keys</span><span class="p">,</span> <span class="n">force</span><span class="p">)</span>
            <span class="n">env</span><span class="o">.</span><span class="n">act</span><span class="p">(</span><span class="s2">"auv0"</span><span class="p">,</span> <span class="n">command</span><span class="p">)</span>

        <span class="c1"># Clean up</span>
        <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
</div>
</section>
</div>
</div>
<footer><div aria-label="Footer" class="rst-footer-buttons" role="navigation">
<a accesskey="p" class="btn btn-neutral float-left" href="pd-controllers.html" rel="prev" title="Example: PD Controller"><span aria-hidden="true" class="fa fa-arrow-circle-left"></span> Previous</a>
<a accesskey="n" class="btn btn-neutral float-right" href="sonar_imaging.html" rel="next" title="Visualizing Imaging Sonar">Next <span aria-hidden="true" class="fa fa-arrow-circle-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<p>© Copyright BYU FRoStLab.</p>
</div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
</div>
</div>
</section>
</div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
</body>
</html>